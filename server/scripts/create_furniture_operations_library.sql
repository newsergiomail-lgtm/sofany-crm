-- =====================================================
-- БИБЛИОТЕКА ОПЕРАЦИЙ И ПРОФЕССИЙ ДЛЯ МЯГКОЙ МЕБЕЛИ
-- =====================================================
-- Создано: 12.09.2025
-- Описание: Полная библиотека операций и профессий для производства мягкой мебели

-- =====================================================
-- ОПЕРАЦИИ ПРОИЗВОДСТВА
-- =====================================================

-- Создаем таблицу операций, если её нет
CREATE TABLE IF NOT EXISTS production_operations (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    department VARCHAR(100) NOT NULL,
    estimated_time INTEGER, -- в минутах
    difficulty_level INTEGER CHECK (difficulty_level BETWEEN 1 AND 5),
    required_skills TEXT[],
    materials_needed TEXT[],
    tools_required TEXT[],
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Создаем таблицу профессий, если её нет
CREATE TABLE IF NOT EXISTS production_professions (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    department VARCHAR(100) NOT NULL,
    skill_level VARCHAR(50) NOT NULL, -- junior, middle, senior, master
    hourly_rate DECIMAL(10,2),
    required_education TEXT,
    responsibilities TEXT[],
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- =====================================================
-- ОПЕРАЦИИ ПОДГОТОВКИ МАТЕРИАЛОВ
-- =====================================================

INSERT INTO production_operations (name, description, department, estimated_time, difficulty_level, required_skills, materials_needed, tools_required) VALUES
-- Раскрой материалов
('Раскрой пиломатериалов', 'Раскрой бруса и досок по размерам каркаса', 'Подготовительный цех', 30, 2, 
 ARRAY['Работа с пилой', 'Чтение чертежей', 'Измерения'], 
 ARRAY['Брус сосна', 'Брус береза', 'Доска сосна'], 
 ARRAY['Циркулярная пила', 'Рулетка', 'Угольник']),

('Раскрой фанеры', 'Раскрой фанеры для задних стенок и полок', 'Подготовительный цех', 20, 2, 
 ARRAY['Работа с пилой', 'Чтение чертежей'], 
 ARRAY['Фанера березовая', 'Фанера хвойная'], 
 ARRAY['Циркулярная пила', 'Рулетка', 'Угольник']),

('Раскрой ДВП', 'Раскрой ДВП для задних стенок', 'Подготовительный цех', 15, 1, 
 ARRAY['Работа с пилой'], 
 ARRAY['ДВП 3мм', 'ДВП 4мм'], 
 ARRAY['Циркулярная пила', 'Рулетка']),

('Раскрой ткани', 'Раскрой обивки по выкройкам', 'Швейный цех', 45, 3, 
 ARRAY['Работа с тканью', 'Чтение выкроек', 'Раскрой'], 
 ARRAY['Жаккард', 'Велюр', 'Флок', 'Микрофибра'], 
 ARRAY['Ножницы', 'Мел', 'Выкройки', 'Стол для раскроя']),

('Нарезка ППУ', 'Нарезка поролона по размерам', 'Формовка ППУ', 25, 2, 
 ARRAY['Работа с ППУ', 'Измерения'], 
 ARRAY['ППУ-25', 'ППУ-30', 'ППУ-35'], 
 ARRAY['Нож для ППУ', 'Рулетка', 'Линейка']),

-- Подготовка каркаса
('Обработка древесины', 'Шлифовка и обработка деревянных элементов', 'Столярный цех', 40, 3, 
 ARRAY['Работа с деревом', 'Шлифовка', 'Обработка'], 
 ARRAY['Брус сосна', 'Брус береза', 'Брус дуб'], 
 ARRAY['Шлифмашина', 'Наждачная бумага', 'Стамески']),

('Сверление отверстий', 'Сверление отверстий для крепежа', 'Столярный цех', 20, 2, 
 ARRAY['Работа с дрелью', 'Измерения'], 
 ARRAY['Брус', 'Доска'], 
 ARRAY['Дрель', 'Сверла', 'Рулетка']),

('Сборка каркаса', 'Сборка деревянного каркаса мебели', 'Столярный цех', 120, 4, 
 ARRAY['Столярные работы', 'Чтение чертежей', 'Сборка'], 
 ARRAY['Брус', 'Доска', 'Саморезы', 'Уголки'], 
 ARRAY['Шуруповерт', 'Угольник', 'Струбцины']);

-- =====================================================
-- ОСНОВНЫЕ ПРОИЗВОДСТВЕННЫЕ ОПЕРАЦИИ
-- =====================================================

INSERT INTO production_operations (name, description, department, estimated_time, difficulty_level, required_skills, materials_needed, tools_required) VALUES
-- Столярный цех
('Изготовление каркаса дивана', 'Полная сборка каркаса дивана', 'Столярный цех', 180, 5, 
 ARRAY['Столярные работы', 'Чтение чертежей', 'Сборка', 'Контроль качества'], 
 ARRAY['Брус', 'Доска', 'Фанера', 'Саморезы', 'Уголки'], 
 ARRAY['Шуруповерт', 'Дрель', 'Угольник', 'Струбцины', 'Рулетка']),

('Изготовление каркаса кресла', 'Полная сборка каркаса кресла', 'Столярный цех', 120, 4, 
 ARRAY['Столярные работы', 'Чтение чертежей', 'Сборка'], 
 ARRAY['Брус', 'Доска', 'Фанера', 'Саморезы'], 
 ARRAY['Шуруповерт', 'Дрель', 'Угольник', 'Струбцины']),

('Установка задней стенки', 'Крепление ДВП к каркасу', 'Столярный цех', 30, 2, 
 ARRAY['Работа с ДВП', 'Крепление'], 
 ARRAY['ДВП', 'Саморезы'], 
 ARRAY['Шуруповерт', 'Рулетка']),

-- Формовка ППУ
('Формовка сидений', 'Изготовление подушек сидений из ППУ', 'Формовка ППУ', 90, 4, 
 ARRAY['Работа с ППУ', 'Формовка', 'Контроль качества'], 
 ARRAY['ППУ-25', 'ППУ-30', 'ППУ-35'], 
 ARRAY['Нож для ППУ', 'Форма', 'Линейка']),

('Формовка спинок', 'Изготовление подушек спинок из ППУ', 'Формовка ППУ', 60, 3, 
 ARRAY['Работа с ППУ', 'Формовка'], 
 ARRAY['ППУ-25', 'ППУ-30'], 
 ARRAY['Нож для ППУ', 'Форма', 'Линейка']),

('Формовка подушек', 'Изготовление декоративных подушек', 'Формовка ППУ', 45, 2, 
 ARRAY['Работа с ППУ', 'Формовка'], 
 ARRAY['ППУ-20', 'Синтепон', 'Холлофайбер'], 
 ARRAY['Нож для ППУ', 'Форма']),

-- Швейный цех
('Пошив чехлов сидений', 'Пошив чехлов для сидений', 'Швейный цех', 120, 4, 
 ARRAY['Швейные работы', 'Работа с тканью', 'Чтение выкроек'], 
 ARRAY['Жаккард', 'Велюр', 'Флок', 'Микрофибра', 'Лента обивки'], 
 ARRAY['Швейная машина', 'Ножницы', 'Иглы', 'Нити']),

('Пошив чехлов спинок', 'Пошив чехлов для спинок', 'Швейный цех', 90, 3, 
 ARRAY['Швейные работы', 'Работа с тканью'], 
 ARRAY['Жаккард', 'Велюр', 'Флок', 'Микрофибра', 'Лента обивки'], 
 ARRAY['Швейная машина', 'Ножницы', 'Иглы', 'Нити']),

('Пошив декоративных подушек', 'Пошив декоративных подушек', 'Швейный цех', 60, 3, 
 ARRAY['Швейные работы', 'Работа с тканью'], 
 ARRAY['Жаккард', 'Велюр', 'Флок', 'Синтепон', 'Холлофайбер'], 
 ARRAY['Швейная машина', 'Ножницы', 'Иглы', 'Нити']),

('Обивка мебели', 'Обивка готовой мебели тканью', 'Швейный цех', 180, 5, 
 ARRAY['Обивочные работы', 'Работа с тканью', 'Крепление'], 
 ARRAY['Жаккард', 'Велюр', 'Флок', 'Микрофибра', 'Скобы степлерные'], 
 ARRAY['Степлер', 'Ножницы', 'Молоток', 'Скобы']);

-- =====================================================
-- ОПЕРАЦИИ СБОРКИ И КОНТРОЛЯ
-- =====================================================

INSERT INTO production_operations (name, description, department, estimated_time, difficulty_level, required_skills, materials_needed, tools_required) VALUES
-- Сборочный цех
('Установка пружинных блоков', 'Установка пружинных блоков в сиденья', 'Сборочный цех', 60, 3, 
 ARRAY['Работа с пружинами', 'Крепление'], 
 ARRAY['Пружинный блок змейка', 'Пружинный блок боннель', 'Скоба мебельная'], 
 ARRAY['Степлер', 'Молоток', 'Скобы']),

('Установка механизмов', 'Установка механизмов трансформации', 'Сборочный цех', 90, 4, 
 ARRAY['Работа с механизмами', 'Крепление', 'Настройка'], 
 ARRAY['Механизм книжка', 'Механизм еврокнижка', 'Болты', 'Гайки'], 
 ARRAY['Гаечные ключи', 'Отвертки', 'Дрель']),

('Установка ножек', 'Установка ножек на мебель', 'Сборочный цех', 30, 2, 
 ARRAY['Крепление'], 
 ARRAY['Ножка деревянная', 'Ножка металлическая', 'Болты'], 
 ARRAY['Гаечные ключи', 'Отвертки']),

('Финальная сборка', 'Финальная сборка всех элементов', 'Сборочный цех', 120, 4, 
 ARRAY['Сборка', 'Контроль качества', 'Тестирование'], 
 ARRAY['Каркас', 'Подушки', 'Чехлы', 'Механизмы'], 
 ARRAY['Инструменты', 'Измерительные приборы']),

-- Контроль качества
('Контроль размеров', 'Проверка размеров готовой мебели', 'Контроль качества', 30, 2, 
 ARRAY['Измерения', 'Контроль качества'], 
 ARRAY['Готовая мебель'], 
 ARRAY['Рулетка', 'Угольник', 'Линейка']),

('Тестирование механизмов', 'Тестирование работы механизмов', 'Контроль качества', 45, 3, 
 ARRAY['Тестирование', 'Контроль качества'], 
 ARRAY['Механизмы'], 
 ARRAY['Тестовые нагрузки']),

('Контроль обивки', 'Проверка качества обивки', 'Контроль качества', 20, 2, 
 ARRAY['Контроль качества', 'Визуальный осмотр'], 
 ARRAY['Обивка'], 
 ARRAY['Освещение', 'Лупа']),

-- Упаковка
('Упаковка мебели', 'Упаковка готовой мебели', 'Упаковочный цех', 60, 2, 
 ARRAY['Упаковка', 'Обращение с мебелью'], 
 ARRAY['Картон гофрированный', 'Пленка', 'Скотч'], 
 ARRAY['Скотч-пистолет', 'Ножницы', 'Стол для упаковки']);

-- =====================================================
-- ПРОФЕССИИ ПРОИЗВОДСТВА
-- =====================================================

INSERT INTO production_professions (name, description, department, skill_level, hourly_rate, required_education, responsibilities) VALUES
-- Подготовительный цех
('Раскройщик', 'Специалист по раскрою материалов', 'Подготовительный цех', 'middle', 250.00, 
 'Среднее специальное', 
 ARRAY['Раскрой пиломатериалов', 'Раскрой фанеры', 'Раскрой ДВП', 'Раскрой ткани', 'Нарезка ППУ']),

('Подготовщик материалов', 'Подготовка материалов к производству', 'Подготовительный цех', 'junior', 200.00, 
 'Среднее', 
 ARRAY['Подготовка материалов', 'Сортировка', 'Маркировка']),

-- Столярный цех
('Столяр-мебельщик', 'Изготовление деревянных каркасов мебели', 'Столярный цех', 'senior', 400.00, 
 'Высшее или среднее специальное', 
 ARRAY['Изготовление каркаса дивана', 'Изготовление каркаса кресла', 'Обработка древесины', 'Сверление отверстий', 'Сборка каркаса']),

('Столяр-сборщик', 'Сборка деревянных элементов', 'Столярный цех', 'middle', 300.00, 
 'Среднее специальное', 
 ARRAY['Сборка каркаса', 'Установка задней стенки', 'Крепление элементов']),

-- Формовка ППУ
('Оператор формовки ППУ', 'Изготовление подушек из поролона', 'Формовка ППУ', 'middle', 280.00, 
 'Среднее специальное', 
 ARRAY['Формовка сидений', 'Формовка спинок', 'Формовка подушек', 'Контроль качества ППУ']),

('Технолог ППУ', 'Контроль технологического процесса', 'Формовка ППУ', 'senior', 450.00, 
 'Высшее', 
 ARRAY['Контроль качества', 'Настройка оборудования', 'Оптимизация процессов']),

-- Швейный цех
('Швея-обойщик', 'Пошив чехлов и обивка мебели', 'Швейный цех', 'middle', 320.00, 
 'Среднее специальное', 
 ARRAY['Пошив чехлов сидений', 'Пошив чехлов спинок', 'Пошив декоративных подушек', 'Обивка мебели']),

('Швея-закройщик', 'Раскрой ткани по выкройкам', 'Швейный цех', 'junior', 220.00, 
 'Среднее', 
 ARRAY['Раскрой ткани', 'Подготовка выкроек', 'Маркировка деталей']),

('Мастер-обойщик', 'Сложная обивка и контроль качества', 'Швейный цех', 'master', 500.00, 
 'Высшее или среднее специальное + опыт', 
 ARRAY['Сложная обивка', 'Контроль качества', 'Обучение персонала', 'Разработка технологий']),

-- Сборочный цех
('Сборщик мебели', 'Сборка готовой мебели', 'Сборочный цех', 'middle', 300.00, 
 'Среднее специальное', 
 ARRAY['Установка пружинных блоков', 'Установка механизмов', 'Установка ножек', 'Финальная сборка']),

('Сборщик-механик', 'Специалист по механизмам', 'Сборочный цех', 'senior', 400.00, 
 'Среднее специальное', 
 ARRAY['Установка механизмов', 'Настройка механизмов', 'Ремонт механизмов']),

-- Контроль качества
('Контролер качества', 'Контроль качества готовой продукции', 'Контроль качества', 'middle', 350.00, 
 'Среднее специальное', 
 ARRAY['Контроль размеров', 'Тестирование механизмов', 'Контроль обивки', 'Документирование дефектов']),

('Инженер по качеству', 'Разработка стандартов качества', 'Контроль качества', 'senior', 550.00, 
 'Высшее', 
 ARRAY['Разработка стандартов', 'Анализ дефектов', 'Улучшение процессов', 'Обучение контролеров']),

-- Упаковка
('Упаковщик', 'Упаковка готовой мебели', 'Упаковочный цех', 'junior', 180.00, 
 'Среднее', 
 ARRAY['Упаковка мебели', 'Маркировка', 'Погрузка']),

-- Вспомогательные профессии
('Кладовщик', 'Управление складом материалов', 'Склад', 'junior', 200.00, 
 'Среднее', 
 ARRAY['Приемка материалов', 'Выдача материалов', 'Учет остатков', 'Сортировка']),

('Технолог', 'Разработка технологических процессов', 'Технологический отдел', 'senior', 600.00, 
 'Высшее', 
 ARRAY['Разработка технологий', 'Оптимизация процессов', 'Внедрение новшеств', 'Обучение персонала']),

('Мастер цеха', 'Управление производственным цехом', 'Производство', 'master', 700.00, 
 'Высшее + опыт руководства', 
 ARRAY['Управление цехом', 'Планирование производства', 'Контроль качества', 'Обучение персонала', 'Взаимодействие с другими цехами']);

-- =====================================================
-- ОБНОВЛЕНИЕ СТАТИСТИКИ
-- =====================================================

-- Обновляем статистику таблиц
ANALYZE production_operations;
ANALYZE production_professions;

-- Выводим итоговую статистику
SELECT 
    'Операции производства' as description,
    COUNT(*) as count
FROM production_operations;

SELECT 
    'Профессии производства' as description,
    COUNT(*) as count
FROM production_professions;

-- Выводим операции по цехам
SELECT 
    department as "Цех",
    COUNT(*) as "Количество операций"
FROM production_operations 
GROUP BY department 
ORDER BY department;

-- Выводим профессии по уровням
SELECT 
    skill_level as "Уровень",
    COUNT(*) as "Количество профессий"
FROM production_professions 
GROUP BY skill_level 
ORDER BY skill_level;
-- БИБЛИОТЕКА ОПЕРАЦИЙ И ПРОФЕССИЙ ДЛЯ МЯГКОЙ МЕБЕЛИ
-- =====================================================
-- Создано: 12.09.2025
-- Описание: Полная библиотека операций и профессий для производства мягкой мебели

-- =====================================================
-- ОПЕРАЦИИ ПРОИЗВОДСТВА
-- =====================================================

-- Создаем таблицу операций, если её нет
CREATE TABLE IF NOT EXISTS production_operations (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    department VARCHAR(100) NOT NULL,
    estimated_time INTEGER, -- в минутах
    difficulty_level INTEGER CHECK (difficulty_level BETWEEN 1 AND 5),
    required_skills TEXT[],
    materials_needed TEXT[],
    tools_required TEXT[],
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Создаем таблицу профессий, если её нет
CREATE TABLE IF NOT EXISTS production_professions (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    department VARCHAR(100) NOT NULL,
    skill_level VARCHAR(50) NOT NULL, -- junior, middle, senior, master
    hourly_rate DECIMAL(10,2),
    required_education TEXT,
    responsibilities TEXT[],
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- =====================================================
-- ОПЕРАЦИИ ПОДГОТОВКИ МАТЕРИАЛОВ
-- =====================================================

INSERT INTO production_operations (name, description, department, estimated_time, difficulty_level, required_skills, materials_needed, tools_required) VALUES
-- Раскрой материалов
('Раскрой пиломатериалов', 'Раскрой бруса и досок по размерам каркаса', 'Подготовительный цех', 30, 2, 
 ARRAY['Работа с пилой', 'Чтение чертежей', 'Измерения'], 
 ARRAY['Брус сосна', 'Брус береза', 'Доска сосна'], 
 ARRAY['Циркулярная пила', 'Рулетка', 'Угольник']),

('Раскрой фанеры', 'Раскрой фанеры для задних стенок и полок', 'Подготовительный цех', 20, 2, 
 ARRAY['Работа с пилой', 'Чтение чертежей'], 
 ARRAY['Фанера березовая', 'Фанера хвойная'], 
 ARRAY['Циркулярная пила', 'Рулетка', 'Угольник']),

('Раскрой ДВП', 'Раскрой ДВП для задних стенок', 'Подготовительный цех', 15, 1, 
 ARRAY['Работа с пилой'], 
 ARRAY['ДВП 3мм', 'ДВП 4мм'], 
 ARRAY['Циркулярная пила', 'Рулетка']),

('Раскрой ткани', 'Раскрой обивки по выкройкам', 'Швейный цех', 45, 3, 
 ARRAY['Работа с тканью', 'Чтение выкроек', 'Раскрой'], 
 ARRAY['Жаккард', 'Велюр', 'Флок', 'Микрофибра'], 
 ARRAY['Ножницы', 'Мел', 'Выкройки', 'Стол для раскроя']),

('Нарезка ППУ', 'Нарезка поролона по размерам', 'Формовка ППУ', 25, 2, 
 ARRAY['Работа с ППУ', 'Измерения'], 
 ARRAY['ППУ-25', 'ППУ-30', 'ППУ-35'], 
 ARRAY['Нож для ППУ', 'Рулетка', 'Линейка']),

-- Подготовка каркаса
('Обработка древесины', 'Шлифовка и обработка деревянных элементов', 'Столярный цех', 40, 3, 
 ARRAY['Работа с деревом', 'Шлифовка', 'Обработка'], 
 ARRAY['Брус сосна', 'Брус береза', 'Брус дуб'], 
 ARRAY['Шлифмашина', 'Наждачная бумага', 'Стамески']),

('Сверление отверстий', 'Сверление отверстий для крепежа', 'Столярный цех', 20, 2, 
 ARRAY['Работа с дрелью', 'Измерения'], 
 ARRAY['Брус', 'Доска'], 
 ARRAY['Дрель', 'Сверла', 'Рулетка']),

('Сборка каркаса', 'Сборка деревянного каркаса мебели', 'Столярный цех', 120, 4, 
 ARRAY['Столярные работы', 'Чтение чертежей', 'Сборка'], 
 ARRAY['Брус', 'Доска', 'Саморезы', 'Уголки'], 
 ARRAY['Шуруповерт', 'Угольник', 'Струбцины']);

-- =====================================================
-- ОСНОВНЫЕ ПРОИЗВОДСТВЕННЫЕ ОПЕРАЦИИ
-- =====================================================

INSERT INTO production_operations (name, description, department, estimated_time, difficulty_level, required_skills, materials_needed, tools_required) VALUES
-- Столярный цех
('Изготовление каркаса дивана', 'Полная сборка каркаса дивана', 'Столярный цех', 180, 5, 
 ARRAY['Столярные работы', 'Чтение чертежей', 'Сборка', 'Контроль качества'], 
 ARRAY['Брус', 'Доска', 'Фанера', 'Саморезы', 'Уголки'], 
 ARRAY['Шуруповерт', 'Дрель', 'Угольник', 'Струбцины', 'Рулетка']),

('Изготовление каркаса кресла', 'Полная сборка каркаса кресла', 'Столярный цех', 120, 4, 
 ARRAY['Столярные работы', 'Чтение чертежей', 'Сборка'], 
 ARRAY['Брус', 'Доска', 'Фанера', 'Саморезы'], 
 ARRAY['Шуруповерт', 'Дрель', 'Угольник', 'Струбцины']),

('Установка задней стенки', 'Крепление ДВП к каркасу', 'Столярный цех', 30, 2, 
 ARRAY['Работа с ДВП', 'Крепление'], 
 ARRAY['ДВП', 'Саморезы'], 
 ARRAY['Шуруповерт', 'Рулетка']),

-- Формовка ППУ
('Формовка сидений', 'Изготовление подушек сидений из ППУ', 'Формовка ППУ', 90, 4, 
 ARRAY['Работа с ППУ', 'Формовка', 'Контроль качества'], 
 ARRAY['ППУ-25', 'ППУ-30', 'ППУ-35'], 
 ARRAY['Нож для ППУ', 'Форма', 'Линейка']),

('Формовка спинок', 'Изготовление подушек спинок из ППУ', 'Формовка ППУ', 60, 3, 
 ARRAY['Работа с ППУ', 'Формовка'], 
 ARRAY['ППУ-25', 'ППУ-30'], 
 ARRAY['Нож для ППУ', 'Форма', 'Линейка']),

('Формовка подушек', 'Изготовление декоративных подушек', 'Формовка ППУ', 45, 2, 
 ARRAY['Работа с ППУ', 'Формовка'], 
 ARRAY['ППУ-20', 'Синтепон', 'Холлофайбер'], 
 ARRAY['Нож для ППУ', 'Форма']),

-- Швейный цех
('Пошив чехлов сидений', 'Пошив чехлов для сидений', 'Швейный цех', 120, 4, 
 ARRAY['Швейные работы', 'Работа с тканью', 'Чтение выкроек'], 
 ARRAY['Жаккард', 'Велюр', 'Флок', 'Микрофибра', 'Лента обивки'], 
 ARRAY['Швейная машина', 'Ножницы', 'Иглы', 'Нити']),

('Пошив чехлов спинок', 'Пошив чехлов для спинок', 'Швейный цех', 90, 3, 
 ARRAY['Швейные работы', 'Работа с тканью'], 
 ARRAY['Жаккард', 'Велюр', 'Флок', 'Микрофибра', 'Лента обивки'], 
 ARRAY['Швейная машина', 'Ножницы', 'Иглы', 'Нити']),

('Пошив декоративных подушек', 'Пошив декоративных подушек', 'Швейный цех', 60, 3, 
 ARRAY['Швейные работы', 'Работа с тканью'], 
 ARRAY['Жаккард', 'Велюр', 'Флок', 'Синтепон', 'Холлофайбер'], 
 ARRAY['Швейная машина', 'Ножницы', 'Иглы', 'Нити']),

('Обивка мебели', 'Обивка готовой мебели тканью', 'Швейный цех', 180, 5, 
 ARRAY['Обивочные работы', 'Работа с тканью', 'Крепление'], 
 ARRAY['Жаккард', 'Велюр', 'Флок', 'Микрофибра', 'Скобы степлерные'], 
 ARRAY['Степлер', 'Ножницы', 'Молоток', 'Скобы']);

-- =====================================================
-- ОПЕРАЦИИ СБОРКИ И КОНТРОЛЯ
-- =====================================================

INSERT INTO production_operations (name, description, department, estimated_time, difficulty_level, required_skills, materials_needed, tools_required) VALUES
-- Сборочный цех
('Установка пружинных блоков', 'Установка пружинных блоков в сиденья', 'Сборочный цех', 60, 3, 
 ARRAY['Работа с пружинами', 'Крепление'], 
 ARRAY['Пружинный блок змейка', 'Пружинный блок боннель', 'Скоба мебельная'], 
 ARRAY['Степлер', 'Молоток', 'Скобы']),

('Установка механизмов', 'Установка механизмов трансформации', 'Сборочный цех', 90, 4, 
 ARRAY['Работа с механизмами', 'Крепление', 'Настройка'], 
 ARRAY['Механизм книжка', 'Механизм еврокнижка', 'Болты', 'Гайки'], 
 ARRAY['Гаечные ключи', 'Отвертки', 'Дрель']),

('Установка ножек', 'Установка ножек на мебель', 'Сборочный цех', 30, 2, 
 ARRAY['Крепление'], 
 ARRAY['Ножка деревянная', 'Ножка металлическая', 'Болты'], 
 ARRAY['Гаечные ключи', 'Отвертки']),

('Финальная сборка', 'Финальная сборка всех элементов', 'Сборочный цех', 120, 4, 
 ARRAY['Сборка', 'Контроль качества', 'Тестирование'], 
 ARRAY['Каркас', 'Подушки', 'Чехлы', 'Механизмы'], 
 ARRAY['Инструменты', 'Измерительные приборы']),

-- Контроль качества
('Контроль размеров', 'Проверка размеров готовой мебели', 'Контроль качества', 30, 2, 
 ARRAY['Измерения', 'Контроль качества'], 
 ARRAY['Готовая мебель'], 
 ARRAY['Рулетка', 'Угольник', 'Линейка']),

('Тестирование механизмов', 'Тестирование работы механизмов', 'Контроль качества', 45, 3, 
 ARRAY['Тестирование', 'Контроль качества'], 
 ARRAY['Механизмы'], 
 ARRAY['Тестовые нагрузки']),

('Контроль обивки', 'Проверка качества обивки', 'Контроль качества', 20, 2, 
 ARRAY['Контроль качества', 'Визуальный осмотр'], 
 ARRAY['Обивка'], 
 ARRAY['Освещение', 'Лупа']),

-- Упаковка
('Упаковка мебели', 'Упаковка готовой мебели', 'Упаковочный цех', 60, 2, 
 ARRAY['Упаковка', 'Обращение с мебелью'], 
 ARRAY['Картон гофрированный', 'Пленка', 'Скотч'], 
 ARRAY['Скотч-пистолет', 'Ножницы', 'Стол для упаковки']);

-- =====================================================
-- ПРОФЕССИИ ПРОИЗВОДСТВА
-- =====================================================

INSERT INTO production_professions (name, description, department, skill_level, hourly_rate, required_education, responsibilities) VALUES
-- Подготовительный цех
('Раскройщик', 'Специалист по раскрою материалов', 'Подготовительный цех', 'middle', 250.00, 
 'Среднее специальное', 
 ARRAY['Раскрой пиломатериалов', 'Раскрой фанеры', 'Раскрой ДВП', 'Раскрой ткани', 'Нарезка ППУ']),

('Подготовщик материалов', 'Подготовка материалов к производству', 'Подготовительный цех', 'junior', 200.00, 
 'Среднее', 
 ARRAY['Подготовка материалов', 'Сортировка', 'Маркировка']),

-- Столярный цех
('Столяр-мебельщик', 'Изготовление деревянных каркасов мебели', 'Столярный цех', 'senior', 400.00, 
 'Высшее или среднее специальное', 
 ARRAY['Изготовление каркаса дивана', 'Изготовление каркаса кресла', 'Обработка древесины', 'Сверление отверстий', 'Сборка каркаса']),

('Столяр-сборщик', 'Сборка деревянных элементов', 'Столярный цех', 'middle', 300.00, 
 'Среднее специальное', 
 ARRAY['Сборка каркаса', 'Установка задней стенки', 'Крепление элементов']),

-- Формовка ППУ
('Оператор формовки ППУ', 'Изготовление подушек из поролона', 'Формовка ППУ', 'middle', 280.00, 
 'Среднее специальное', 
 ARRAY['Формовка сидений', 'Формовка спинок', 'Формовка подушек', 'Контроль качества ППУ']),

('Технолог ППУ', 'Контроль технологического процесса', 'Формовка ППУ', 'senior', 450.00, 
 'Высшее', 
 ARRAY['Контроль качества', 'Настройка оборудования', 'Оптимизация процессов']),

-- Швейный цех
('Швея-обойщик', 'Пошив чехлов и обивка мебели', 'Швейный цех', 'middle', 320.00, 
 'Среднее специальное', 
 ARRAY['Пошив чехлов сидений', 'Пошив чехлов спинок', 'Пошив декоративных подушек', 'Обивка мебели']),

('Швея-закройщик', 'Раскрой ткани по выкройкам', 'Швейный цех', 'junior', 220.00, 
 'Среднее', 
 ARRAY['Раскрой ткани', 'Подготовка выкроек', 'Маркировка деталей']),

('Мастер-обойщик', 'Сложная обивка и контроль качества', 'Швейный цех', 'master', 500.00, 
 'Высшее или среднее специальное + опыт', 
 ARRAY['Сложная обивка', 'Контроль качества', 'Обучение персонала', 'Разработка технологий']),

-- Сборочный цех
('Сборщик мебели', 'Сборка готовой мебели', 'Сборочный цех', 'middle', 300.00, 
 'Среднее специальное', 
 ARRAY['Установка пружинных блоков', 'Установка механизмов', 'Установка ножек', 'Финальная сборка']),

('Сборщик-механик', 'Специалист по механизмам', 'Сборочный цех', 'senior', 400.00, 
 'Среднее специальное', 
 ARRAY['Установка механизмов', 'Настройка механизмов', 'Ремонт механизмов']),

-- Контроль качества
('Контролер качества', 'Контроль качества готовой продукции', 'Контроль качества', 'middle', 350.00, 
 'Среднее специальное', 
 ARRAY['Контроль размеров', 'Тестирование механизмов', 'Контроль обивки', 'Документирование дефектов']),

('Инженер по качеству', 'Разработка стандартов качества', 'Контроль качества', 'senior', 550.00, 
 'Высшее', 
 ARRAY['Разработка стандартов', 'Анализ дефектов', 'Улучшение процессов', 'Обучение контролеров']),

-- Упаковка
('Упаковщик', 'Упаковка готовой мебели', 'Упаковочный цех', 'junior', 180.00, 
 'Среднее', 
 ARRAY['Упаковка мебели', 'Маркировка', 'Погрузка']),

-- Вспомогательные профессии
('Кладовщик', 'Управление складом материалов', 'Склад', 'junior', 200.00, 
 'Среднее', 
 ARRAY['Приемка материалов', 'Выдача материалов', 'Учет остатков', 'Сортировка']),

('Технолог', 'Разработка технологических процессов', 'Технологический отдел', 'senior', 600.00, 
 'Высшее', 
 ARRAY['Разработка технологий', 'Оптимизация процессов', 'Внедрение новшеств', 'Обучение персонала']),

('Мастер цеха', 'Управление производственным цехом', 'Производство', 'master', 700.00, 
 'Высшее + опыт руководства', 
 ARRAY['Управление цехом', 'Планирование производства', 'Контроль качества', 'Обучение персонала', 'Взаимодействие с другими цехами']);

-- =====================================================
-- ОБНОВЛЕНИЕ СТАТИСТИКИ
-- =====================================================

-- Обновляем статистику таблиц
ANALYZE production_operations;
ANALYZE production_professions;

-- Выводим итоговую статистику
SELECT 
    'Операции производства' as description,
    COUNT(*) as count
FROM production_operations;

SELECT 
    'Профессии производства' as description,
    COUNT(*) as count
FROM production_professions;

-- Выводим операции по цехам
SELECT 
    department as "Цех",
    COUNT(*) as "Количество операций"
FROM production_operations 
GROUP BY department 
ORDER BY department;

-- Выводим профессии по уровням
SELECT 
    skill_level as "Уровень",
    COUNT(*) as "Количество профессий"
FROM production_professions 
GROUP BY skill_level 
ORDER BY skill_level;










